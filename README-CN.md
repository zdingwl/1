# ğŸ¬ Huobao Drama - AI çŸ­å‰§ç”Ÿæˆå¹³å°

<div align="center">

**åŸºäº Go + Vue3 çš„å…¨æ ˆ AI çŸ­å‰§è‡ªåŠ¨åŒ–ç”Ÿäº§å¹³å°**

[![Go Version](https://img.shields.io/badge/Go-1.23+-00ADD8?style=flat&logo=go)](https://golang.org)
[![Vue Version](https://img.shields.io/badge/Vue-3.x-4FC08D?style=flat&logo=vue.js)](https://vuejs.org)
[![License](https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by-nc-sa/4.0/)

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [éƒ¨ç½²æŒ‡å—](#éƒ¨ç½²æŒ‡å—)

[ç®€ä½“ä¸­æ–‡](README-CN.md) | [English](README.md) | [æ—¥æœ¬èª](README-JA.md)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

Huobao Drama æ˜¯ä¸€ä¸ªåŸºäº AI çš„çŸ­å‰§è‡ªåŠ¨åŒ–ç”Ÿäº§å¹³å°ï¼Œå®ç°ä»å‰§æœ¬ç”Ÿæˆã€è§’è‰²è®¾è®¡ã€åˆ†é•œåˆ¶ä½œåˆ°è§†é¢‘åˆæˆçš„å…¨æµç¨‹è‡ªåŠ¨åŒ–ã€‚

ç«å®çŸ­å‰§å•†ä¸šç‰ˆåœ°å€ï¼š[ç«å®çŸ­å‰§å•†ä¸šç‰ˆ](https://drama.chatfire.site/shortvideo)

ç«å®å°è¯´ç”Ÿæˆï¼š[ç«å®å°è¯´ç”Ÿæˆ](https://marketing.chatfire.site/huobao-novel/)

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **ğŸ¤– AI é©±åŠ¨**ï¼šä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹è§£æå‰§æœ¬ï¼Œæå–è§’è‰²ã€åœºæ™¯å’Œåˆ†é•œä¿¡æ¯
- **ğŸ¨ æ™ºèƒ½åˆ›ä½œ**ï¼šAI ç»˜å›¾ç”Ÿæˆè§’è‰²å½¢è±¡å’Œåœºæ™¯èƒŒæ™¯
- **ğŸ“¹ è§†é¢‘ç”Ÿæˆ**ï¼šåŸºäºæ–‡ç”Ÿè§†é¢‘å’Œå›¾ç”Ÿè§†é¢‘æ¨¡å‹è‡ªåŠ¨ç”Ÿæˆåˆ†é•œè§†é¢‘
- **ğŸ”„ å·¥ä½œæµ**ï¼šå®Œæ•´çš„çŸ­å‰§åˆ¶ä½œå·¥ä½œæµï¼Œä»åˆ›æ„åˆ°æˆç‰‡ä¸€ç«™å¼å®Œæˆ

### ğŸ› ï¸ æŠ€æœ¯æ¶æ„

é‡‡ç”¨**DDD é¢†åŸŸé©±åŠ¨è®¾è®¡**ï¼Œæ¸…æ™°åˆ†å±‚ï¼š

```
â”œâ”€â”€ APIå±‚ (Gin HTTP)
â”œâ”€â”€ åº”ç”¨æœåŠ¡å±‚ (Business Logic)
â”œâ”€â”€ é¢†åŸŸå±‚ (Domain Models)
â””â”€â”€ åŸºç¡€è®¾æ–½å±‚ (Database, External Services)
```

### ğŸ¥ ä½œå“å±•ç¤º / Demo Videos

ä½“éªŒ AI çŸ­å‰§ç”Ÿæˆæ•ˆæœï¼š

<div align="center">

**ç¤ºä¾‹ä½œå“ 1**

<video src="https://ffile.chatfire.site/cf/public/20260114094337396.mp4" controls width="640"></video>

**ç¤ºä¾‹ä½œå“ 2**

<video src="https://ffile.chatfire.site/cf/public/fcede75e8aeafe22031dbf78f86285b8.mp4" controls width="640"></video>

[ç‚¹å‡»è§‚çœ‹è§†é¢‘ 1](https://ffile.chatfire.site/cf/public/20260114094337396.mp4) | [ç‚¹å‡»è§‚çœ‹è§†é¢‘ 2](https://ffile.chatfire.site/cf/public/fcede75e8aeafe22031dbf78f86285b8.mp4)

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ­ è§’è‰²ç®¡ç†

- âœ… AI ç”Ÿæˆè§’è‰²å½¢è±¡
- âœ… æ‰¹é‡è§’è‰²ç”Ÿæˆ
- âœ… è§’è‰²å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†

### ğŸ¬ åˆ†é•œåˆ¶ä½œ

- âœ… è‡ªåŠ¨ç”Ÿæˆåˆ†é•œè„šæœ¬
- âœ… åœºæ™¯æè¿°å’Œé•œå¤´è®¾è®¡
- âœ… åˆ†é•œå›¾ç‰‡ç”Ÿæˆï¼ˆæ–‡ç”Ÿå›¾ï¼‰
- âœ… å¸§ç±»å‹é€‰æ‹©ï¼ˆé¦–å¸§/å…³é”®å¸§/å°¾å¸§/åˆ†é•œæ¿ï¼‰

### ğŸ¥ è§†é¢‘ç”Ÿæˆ

- âœ… å›¾ç”Ÿè§†é¢‘è‡ªåŠ¨ç”Ÿæˆ
- âœ… è§†é¢‘åˆæˆå’Œå‰ªè¾‘
- âœ… è½¬åœºæ•ˆæœ

### ğŸ“¦ èµ„æºç®¡ç†

- âœ… ç´ æåº“ç»Ÿä¸€ç®¡ç†
- âœ… æœ¬åœ°å­˜å‚¨æ”¯æŒ
- âœ… èµ„æºå¯¼å…¥å¯¼å‡º
- âœ… ä»»åŠ¡è¿›åº¦è¿½è¸ª

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

| è½¯ä»¶        | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜                 |
| ----------- | -------- | -------------------- |
| **Go**      | 1.23+    | åç«¯è¿è¡Œç¯å¢ƒ         |
| **Node.js** | 18+      | å‰ç«¯æ„å»ºç¯å¢ƒ         |
| **npm**     | 9+       | åŒ…ç®¡ç†å·¥å…·           |
| **FFmpeg**  | 4.0+     | è§†é¢‘å¤„ç†ï¼ˆ**å¿…éœ€**ï¼‰ |
| **SQLite**  | 3.x      | æ•°æ®åº“ï¼ˆå·²å†…ç½®ï¼‰     |

#### å®‰è£… FFmpeg

**macOS:**

```bash
brew install ffmpeg
```

**Ubuntu/Debian:**

```bash
sudo apt update
sudo apt install ffmpeg
```

**Windows:**
ä» [FFmpeg å®˜ç½‘](https://ffmpeg.org/download.html) ä¸‹è½½å¹¶é…ç½®ç¯å¢ƒå˜é‡

éªŒè¯å®‰è£…ï¼š

```bash
ffmpeg -version
```

### âš™ï¸ é…ç½®æ–‡ä»¶

å¤åˆ¶å¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š

```bash
cp configs/config.example.yaml configs/config.yaml
vim configs/config.yaml
```

é…ç½®æ–‡ä»¶æ ¼å¼ï¼ˆ`configs/config.yaml`ï¼‰ï¼š

```yaml
app:
  name: "Huobao Drama API"
  version: "1.0.0"
  debug: true # å¼€å‘ç¯å¢ƒè®¾ä¸ºtrueï¼Œç”Ÿäº§ç¯å¢ƒè®¾ä¸ºfalse

server:
  port: 5678
  host: "0.0.0.0"
  cors_origins:
    - "http://localhost:3012"
  read_timeout: 600
  write_timeout: 600

database:
  type: "sqlite"
  path: "./data/drama_generator.db"
  max_idle: 10
  max_open: 100

storage:
  type: "local"
  local_path: "./data/storage"
  base_url: "http://localhost:5678/static"

ai:
  default_text_provider: "openai"
  default_image_provider: "openai"
  default_video_provider: "doubao"
```

**é‡è¦é…ç½®é¡¹ï¼š**

- `app.debug`: è°ƒè¯•æ¨¡å¼å¼€å…³ï¼ˆå¼€å‘ç¯å¢ƒå»ºè®®è®¾ä¸º trueï¼‰
- `server.port`: æœåŠ¡è¿è¡Œç«¯å£
- `server.cors_origins`: å…è®¸è·¨åŸŸè®¿é—®çš„å‰ç«¯åœ°å€
- `database.path`: SQLite æ•°æ®åº“æ–‡ä»¶è·¯å¾„
- `storage.local_path`: æœ¬åœ°æ–‡ä»¶å­˜å‚¨è·¯å¾„
- `storage.base_url`: é™æ€èµ„æºè®¿é—® URL
- `ai.default_*_provider`: AI æœåŠ¡æä¾›å•†é…ç½®ï¼ˆåœ¨ Web ç•Œé¢ä¸­é…ç½®å…·ä½“çš„ API Keyï¼‰

### ğŸ“¥ å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/chatfire-AI/huobao-drama.git
cd huobao-drama

# å®‰è£…Goä¾èµ–
go mod download

# å®‰è£…å‰ç«¯ä¾èµ–
cd web
npm install
cd ..
```

### ğŸ¯ å¯åŠ¨é¡¹ç›®

#### æ–¹å¼ä¸€ï¼šå¼€å‘æ¨¡å¼ï¼ˆæ¨èï¼‰

**å‰åç«¯åˆ†ç¦»ï¼Œæ”¯æŒçƒ­é‡è½½**

```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨åç«¯æœåŠ¡
go run main.go

# ç»ˆç«¯2ï¼šå¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd web
npm run dev
```

- å‰ç«¯åœ°å€: `http://localhost:3012`
- åç«¯ API: `http://localhost:5678/api/v1`
- å‰ç«¯è‡ªåŠ¨ä»£ç† API è¯·æ±‚åˆ°åç«¯

#### æ–¹å¼äºŒï¼šå•æœåŠ¡æ¨¡å¼

**åç«¯åŒæ—¶æä¾› API å’Œå‰ç«¯é™æ€æ–‡ä»¶**

```bash
# 1. æ„å»ºå‰ç«¯
cd web
npm run build
cd ..

# 2. å¯åŠ¨æœåŠ¡
go run main.go
```

è®¿é—®: `http://localhost:5678`

### ğŸ—„ï¸ æ•°æ®åº“åˆå§‹åŒ–

æ•°æ®åº“è¡¨ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºï¼ˆä½¿ç”¨ GORM AutoMigrateï¼‰ï¼Œæ— éœ€æ‰‹åŠ¨è¿ç§»ã€‚

---

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### â˜ï¸ äº‘ç«¯ä¸€é”®éƒ¨ç½²ï¼ˆæ¨è 3080Tiï¼‰

ğŸ‘‰ [ä¼˜äº‘æ™ºç®—ï¼Œä¸€é”®éƒ¨ç½²](https://www.compshare.cn/images/CaWEHpAA8t1H?referral_code=8hUJOaWz3YzG64FI2OlCiB&ytag=GPU_YY_YX_GitHub_huobaoai)

> âš ï¸ **æ³¨æ„**ï¼šäº‘ç«¯éƒ¨ç½²æ–¹æ¡ˆæ•°æ®è¯·åŠæ—¶å­˜å‚¨åˆ°æœ¬åœ°

---

### ğŸ³ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šDocker Composeï¼ˆæ¨èï¼‰

#### ğŸš€ å›½å†…ç½‘ç»œåŠ é€Ÿï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ï¼ŒDocker æ‹‰å–é•œåƒå’Œå®‰è£…ä¾èµ–å¯èƒ½è¾ƒæ…¢ã€‚å¯ä»¥é€šè¿‡é…ç½®é•œåƒæºåŠ é€Ÿæ„å»ºè¿‡ç¨‹ã€‚

**æ­¥éª¤ 1ï¼šåˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶**

```bash
cp .env.example .env
```

**æ­¥éª¤ 2ï¼šç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå–æ¶ˆæ³¨é‡Šéœ€è¦çš„é•œåƒæº**

```bash
# å¯ç”¨ Docker Hub é•œåƒï¼ˆæ¨èï¼‰
DOCKER_REGISTRY=docker.1ms.run/

# å¯ç”¨ npm é•œåƒ
NPM_REGISTRY=https://registry.npmmirror.com/

# å¯ç”¨ Go ä»£ç†
GO_PROXY=https://goproxy.cn,direct

# å¯ç”¨ Alpine é•œåƒ
ALPINE_MIRROR=mirrors.aliyun.com
```

**æ­¥éª¤ 3ï¼šä½¿ç”¨ docker compose æ„å»ºï¼ˆå¿…é¡»ï¼‰**

```bash
docker compose build
```

> **é‡è¦è¯´æ˜**ï¼š
>
> - âš ï¸ å¿…é¡»ä½¿ç”¨ `docker compose build` æ‰èƒ½è‡ªåŠ¨åŠ è½½ `.env` æ–‡ä»¶ä¸­çš„é•œåƒæºé…ç½®
> - âŒ å¦‚æœä½¿ç”¨ `docker build` å‘½ä»¤ï¼Œéœ€è¦æ‰‹åŠ¨ä¼ é€’ `--build-arg` å‚æ•°
> - âœ… æ¨èå§‹ç»ˆä½¿ç”¨ `docker compose build` è¿›è¡Œæ„å»º

**æ•ˆæœå¯¹æ¯”**ï¼š

| æ“ä½œ          | ä¸é…ç½®é•œåƒæº | é…ç½®é•œåƒæºå |
| ------------- | ------------ | ------------ |
| æ‹‰å–åŸºç¡€é•œåƒ  | 5-30 åˆ†é’Ÿ    | 1-5 åˆ†é’Ÿ     |
| å®‰è£… npm ä¾èµ– | å¯èƒ½å¤±è´¥     | å¿«é€ŸæˆåŠŸ     |
| ä¸‹è½½ Go ä¾èµ–  | 5-10 åˆ†é’Ÿ    | 30 ç§’-1 åˆ†é’Ÿ |

> **æ³¨æ„**ï¼šå›½å¤–ç”¨æˆ·è¯·å‹¿é…ç½®é•œåƒæºï¼Œä½¿ç”¨é»˜è®¤é…ç½®å³å¯ã€‚

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

#### æ–¹å¼äºŒï¼šDocker å‘½ä»¤

> **æ³¨æ„**ï¼šLinux ç”¨æˆ·éœ€æ·»åŠ  `--add-host=host.docker.internal:host-gateway` ä»¥è®¿é—®å®¿ä¸»æœºæœåŠ¡

```bash
# ä» Docker Hub è¿è¡Œ
docker run -d \
  --name huobao-drama \
  -p 5678:5678 \
  -v $(pwd)/data:/app/data \
  --restart unless-stopped \
  huobao/huobao-drama:latest

# æŸ¥çœ‹æ—¥å¿—
docker logs -f huobao-drama
```

**æœ¬åœ°æ„å»º**ï¼ˆå¯é€‰ï¼‰ï¼š

```bash
docker build -t huobao-drama:latest .
docker run -d --name huobao-drama -p 5678:5678 -v $(pwd)/data:/app/data huobao-drama:latest
```

**Docker éƒ¨ç½²ä¼˜åŠ¿ï¼š**

- âœ… å¼€ç®±å³ç”¨ï¼Œå†…ç½®é»˜è®¤é…ç½®
- âœ… ç¯å¢ƒä¸€è‡´æ€§ï¼Œé¿å…ä¾èµ–é—®é¢˜
- âœ… ä¸€é”®å¯åŠ¨ï¼Œæ— éœ€å®‰è£… Goã€Node.jsã€FFmpeg
- âœ… æ˜“äºè¿ç§»å’Œæ‰©å±•
- âœ… è‡ªåŠ¨å¥åº·æ£€æŸ¥å’Œé‡å¯
- âœ… è‡ªåŠ¨å¤„ç†æ–‡ä»¶æƒé™ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®

#### ğŸ”— è®¿é—®å®¿ä¸»æœºæœåŠ¡ï¼ˆOllama/æœ¬åœ°æ¨¡å‹ï¼‰

å®¹å™¨å·²é…ç½®æ”¯æŒè®¿é—®å®¿ä¸»æœºæœåŠ¡ï¼Œç›´æ¥ä½¿ç”¨ `http://host.docker.internal:ç«¯å£å·` å³å¯ã€‚

**é…ç½®æ­¥éª¤ï¼š**

1. **å®¿ä¸»æœºå¯åŠ¨æœåŠ¡ï¼ˆç›‘å¬æ‰€æœ‰æ¥å£ï¼‰**

   ```bash
   export OLLAMA_HOST=0.0.0.0:11434 && ollama serve
   ```

2. **å‰ç«¯ AI æœåŠ¡é…ç½®**
   - Base URL: `http://host.docker.internal:11434/v1`
   - Provider: `openai`
   - Model: `qwen2.5:latest`

---

### ğŸ­ ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼

#### 1. ç¼–è¯‘æ„å»º

```bash
# 1. æ„å»ºå‰ç«¯
cd web
npm run build
cd ..

# 2. ç¼–è¯‘åç«¯
go build -o huobao-drama .
```

ç”Ÿæˆæ–‡ä»¶ï¼š

- `huobao-drama` - åç«¯å¯æ‰§è¡Œæ–‡ä»¶
- `web/dist/` - å‰ç«¯é™æ€æ–‡ä»¶ï¼ˆå·²åµŒå…¥åç«¯ï¼‰

#### 2. å‡†å¤‡éƒ¨ç½²æ–‡ä»¶

éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ–‡ä»¶ï¼š

```
huobao-drama            # åç«¯å¯æ‰§è¡Œæ–‡ä»¶
configs/config.yaml     # é…ç½®æ–‡ä»¶
data/                   # æ•°æ®ç›®å½•ï¼ˆå¯é€‰ï¼Œé¦–æ¬¡è¿è¡Œè‡ªåŠ¨åˆ›å»ºï¼‰
```

#### 3. æœåŠ¡å™¨é…ç½®

```bash
# ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨
scp huobao-drama user@server:/opt/huobao-drama/
scp configs/config.yaml user@server:/opt/huobao-drama/configs/

# SSHç™»å½•æœåŠ¡å™¨
ssh user@server

# ä¿®æ”¹é…ç½®æ–‡ä»¶
cd /opt/huobao-drama
vim configs/config.yaml
# è®¾ç½®modeä¸ºproduction
# é…ç½®åŸŸåå’Œå­˜å‚¨è·¯å¾„

# åˆ›å»ºæ•°æ®ç›®å½•å¹¶è®¾ç½®æƒé™ï¼ˆé‡è¦ï¼ï¼‰
# æ³¨æ„ï¼šå°† YOUR_USER æ›¿æ¢ä¸ºå®é™…è¿è¡ŒæœåŠ¡çš„ç”¨æˆ·åï¼ˆå¦‚ www-dataã€ubuntuã€deploy ç­‰ï¼‰
sudo mkdir -p /opt/huobao-drama/data/storage
sudo chown -R YOUR_USER:YOUR_USER /opt/huobao-drama/data
sudo chmod -R 755 /opt/huobao-drama/data

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x huobao-drama

# å¯åŠ¨æœåŠ¡
./huobao-drama
```

#### 4. ä½¿ç”¨ systemd ç®¡ç†æœåŠ¡

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/huobao-drama.service`:

```ini
[Unit]
Description=Huobao Drama Service
After=network.target

[Service]
Type=simple
User=YOUR_USER
WorkingDirectory=/opt/huobao-drama
ExecStart=/opt/huobao-drama/huobao-drama
Restart=on-failure
RestartSec=10

# ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
# Environment="GIN_MODE=release"

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl daemon-reload
sudo systemctl enable huobao-drama
sudo systemctl start huobao-drama
sudo systemctl status huobao-drama
```

**âš ï¸ å¸¸è§é—®é¢˜ï¼šSQLite å†™æƒé™é”™è¯¯**

å¦‚æœé‡åˆ° `attempt to write a readonly database` é”™è¯¯ï¼š

```bash
# 1. ç¡®è®¤å½“å‰è¿è¡ŒæœåŠ¡çš„ç”¨æˆ·
sudo systemctl status huobao-drama | grep "Main PID"
ps aux | grep huobao-drama

# 2. ä¿®å¤æƒé™ï¼ˆå°† YOUR_USER æ›¿æ¢ä¸ºå®é™…ç”¨æˆ·åï¼‰
sudo chown -R YOUR_USER:YOUR_USER /opt/huobao-drama/data
sudo chmod -R 755 /opt/huobao-drama/data

# 3. éªŒè¯æƒé™
ls -la /opt/huobao-drama/data
# åº”è¯¥æ˜¾ç¤ºæ‰€æœ‰è€…ä¸ºè¿è¡ŒæœåŠ¡çš„ç”¨æˆ·

# 4. é‡å¯æœåŠ¡
sudo systemctl restart huobao-drama
```

**åŸå› è¯´æ˜**ï¼š

- SQLite éœ€è¦å¯¹æ•°æ®åº“æ–‡ä»¶ **å’Œ** æ‰€åœ¨ç›®å½•éƒ½æœ‰å†™æƒé™
- éœ€è¦åœ¨ç›®å½•ä¸­åˆ›å»ºä¸´æ—¶æ–‡ä»¶ï¼ˆå¦‚ `-wal`ã€`-journal`ï¼‰
- **å…³é”®**ï¼šç¡®ä¿ systemd é…ç½®ä¸­çš„ `User` ä¸æ•°æ®ç›®å½•æ‰€æœ‰è€…ä¸€è‡´

**å¸¸ç”¨ç”¨æˆ·å**ï¼š

- Ubuntu/Debian: `www-data`ã€`ubuntu`
- CentOS/RHEL: `nginx`ã€`apache`
- è‡ªå®šä¹‰éƒ¨ç½²: `deploy`ã€`app`ã€å½“å‰ç™»å½•ç”¨æˆ·

#### 5. Nginx åå‘ä»£ç†

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:5678;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    }

    # é™æ€æ–‡ä»¶ç›´æ¥è®¿é—®
    location /static/ {
        alias /opt/huobao-drama/data/storage/;
    }
}
```

---

## ğŸ¨ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯

- **è¯­è¨€**: Go 1.23+
- **Web æ¡†æ¶**: Gin 1.9+
- **ORM**: GORM
- **æ•°æ®åº“**: SQLite
- **æ—¥å¿—**: Zap
- **è§†é¢‘å¤„ç†**: FFmpeg
- **AI æœåŠ¡**: OpenAIã€Geminiã€ç«å±±ç­‰

### å‰ç«¯æŠ€æœ¯

- **æ¡†æ¶**: Vue 3.4+
- **è¯­è¨€**: TypeScript 5+
- **æ„å»ºå·¥å…·**: Vite 5
- **UI ç»„ä»¶**: Element Plus
- **CSS æ¡†æ¶**: TailwindCSS
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router 4

### å¼€å‘å·¥å…·

- **åŒ…ç®¡ç†**: Go Modules, npm
- **ä»£ç è§„èŒƒ**: ESLint, Prettier
- **ç‰ˆæœ¬æ§åˆ¶**: Git

---

## ğŸ“ å¸¸è§é—®é¢˜

### Q: Docker å®¹å™¨å¦‚ä½•è®¿é—®å®¿ä¸»æœºçš„ Ollamaï¼Ÿ

A: ä½¿ç”¨ `http://host.docker.internal:11434/v1` ä½œä¸º Base URLã€‚æ³¨æ„ä¸¤ç‚¹ï¼š

1. å®¿ä¸»æœº Ollama éœ€ç›‘å¬ `0.0.0.0`ï¼š`export OLLAMA_HOST=0.0.0.0:11434 && ollama serve`
2. Linux ç”¨æˆ·ä½¿ç”¨ `docker run` éœ€æ·»åŠ ï¼š`--add-host=host.docker.internal:host-gateway`

è¯¦è§ï¼š[DOCKER_HOST_ACCESS.md](docs/DOCKER_HOST_ACCESS.md)

### Q: FFmpeg æœªå®‰è£…æˆ–æ‰¾ä¸åˆ°ï¼Ÿ

A: ç¡®ä¿ FFmpeg å·²å®‰è£…å¹¶åœ¨ PATH ç¯å¢ƒå˜é‡ä¸­ã€‚è¿è¡Œ `ffmpeg -version` éªŒè¯ã€‚

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯ APIï¼Ÿ

A: æ£€æŸ¥åç«¯æ˜¯å¦å¯åŠ¨ï¼Œç«¯å£æ˜¯å¦æ­£ç¡®ã€‚å¼€å‘æ¨¡å¼ä¸‹å‰ç«¯ä»£ç†é…ç½®åœ¨ `web/vite.config.ts`ã€‚

### Q: æ•°æ®åº“è¡¨æœªåˆ›å»ºï¼Ÿ

A: GORM ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ï¼Œæ£€æŸ¥æ—¥å¿—ç¡®è®¤è¿ç§»æ˜¯å¦æˆåŠŸã€‚

---

## ğŸ“‹ æ›´æ–°æ—¥å¿— / Changelog

### v1.0.5 (2026-02-06)

#### ğŸ¨ é‡å¤§åŠŸèƒ½

- **ğŸ­ å…¨å±€é£æ ¼ç³»ç»Ÿ**ï¼šå¼•å…¥äº†é¡¹ç›®çº§åˆ«çš„é£æ ¼é€‰æ‹©æ”¯æŒã€‚ç”¨æˆ·ç°åœ¨å¯ä»¥åœ¨å‰§æœ¬å±‚é¢å®šä¹‰è‡ªå®šä¹‰è§†è§‰é£æ ¼ï¼Œè¯¥é£æ ¼å°†è‡ªåŠ¨åº”ç”¨äºæ‰€æœ‰ AI ç”Ÿæˆçš„å†…å®¹ï¼ŒåŒ…æ‹¬è§’è‰²ã€åœºæ™¯å’Œåˆ†é•œå›¾åƒï¼Œç¡®ä¿æ•´ä¸ªåˆ¶ä½œè¿‡ç¨‹ä¸­çš„è‰ºæœ¯é£æ ¼ä¸€è‡´æ€§ã€‚

- **âœ‚ï¸ ä¹å®«æ ¼åºåˆ—å›¾è£å‰ª**ï¼šæ–°å¢è£å‰ªå·¥å…·ï¼Œæ”¯æŒä»åŠ¨ä½œåºåˆ—å›¾ï¼ˆ3x3 ç½‘æ ¼å¸ƒå±€ï¼‰ä¸­æå–å•ä¸ªå¸§ï¼Œå¹¶å°†å…¶æŒ‡å®šä¸ºé¦–å¸§ã€å°¾å¸§æˆ–å…³é”®å¸§ç”¨äºè§†é¢‘ç”Ÿæˆï¼Œä¸ºé•œå¤´æ„å›¾å’Œè¿ç»­æ€§æä¾›æ›´å¤§çš„çµæ´»æ€§ã€‚

#### ğŸš€ åŠŸèƒ½å¢å¼º

- **ğŸ“ ä¼˜åŒ–åŠ¨ä½œåºåˆ—ç½‘æ ¼**ï¼šæ”¹è¿›äº†ä¹å®«æ ¼åŠ¨ä½œåºåˆ—å›¾çš„è§†è§‰è´¨é‡å’Œå¸ƒå±€ï¼Œä¼˜åŒ–äº†é—´è·ã€å¯¹é½å’Œå¸§è¿‡æ¸¡æ•ˆæœã€‚

- **ğŸ”§ æ‰‹åŠ¨ç½‘æ ¼æ‹¼æ¥**ï¼šå¼•å…¥æ‰‹åŠ¨ç½‘æ ¼ç»„åˆå·¥å…·ï¼Œæ”¯æŒ 2x2ï¼ˆå››å®«æ ¼ï¼‰ã€2x3ï¼ˆå…­å®«æ ¼ï¼‰å’Œ 3x3ï¼ˆä¹å®«æ ¼ï¼‰å¸ƒå±€ï¼Œå…è®¸ç”¨æˆ·ä»å•ä¸ªå¸§åˆ›å»ºè‡ªå®šä¹‰åŠ¨ä½œåºåˆ—ã€‚

- **ğŸ—‘ï¸ å†…å®¹ç®¡ç†**ï¼šæ–°å¢å›¾ç‰‡å’Œè§†é¢‘çš„åˆ é™¤åŠŸèƒ½ï¼Œå®ç°æ›´å¥½çš„ç´ æç»„ç»‡å’Œå­˜å‚¨ç®¡ç†ã€‚

### v1.0.4 (2026-01-27)

#### ğŸš€ é‡å¤§æ›´æ–°

- å¼•å…¥æœ¬åœ°å­˜å‚¨ç­–ç•¥ï¼Œå®ç°ç”Ÿæˆå†…å®¹çš„æœ¬åœ°åŒ–ç¼“å­˜ç®¡ç†ï¼Œæœ‰æ•ˆè§„é¿å¤–éƒ¨èµ„æºé“¾æ¥å¤±æ•ˆé£é™©
- é‡‡ç”¨ Base64 ç¼–ç æ–¹æ¡ˆè¿›è¡Œå‚è€ƒå›¾åƒçš„åµŒå…¥å¼ä¼ è¾“
- ä¿®å¤é•œå¤´åˆ‡æ¢æ—¶é•œå¤´å›¾ç‰‡æç¤ºè¯çŠ¶æ€æœªé‡ç½®é—®é¢˜
- ä¿®å¤è§†é¢‘æ·»åŠ ç´ æåº“è§†é¢‘æ—¶é•¿æ˜¾ç¤ºä¸º0çš„é—®é¢˜
- æ·»åŠ åœºæ™¯è¿ç§»è‡³ç« èŠ‚å†…

#### å†å²æ•°æ®æ¸…æ´—

- å¢åŠ æ¸…æ´—è„šæœ¬ï¼Œç”¨äºå¤„ç†å†å²æ•°æ®ï¼Œå…·ä½“æ“ä½œè¯·å‚è€ƒ [MIGRATE_README.md](MIGRATE_README.md)

### v1.0.3 (2026-01-16)

#### ğŸš€ é‡å¤§æ›´æ–°

- SQLite çº¯ Go é©±åŠ¨ï¼ˆ`modernc.org/sqlite`ï¼‰ï¼Œæ”¯æŒ `CGO_ENABLED=0` è·¨å¹³å°ç¼–è¯‘
- ä¼˜åŒ–å¹¶å‘æ€§èƒ½ï¼ˆWAL æ¨¡å¼ï¼‰ï¼Œè§£å†³ "database is locked" é”™è¯¯
- Docker è·¨å¹³å°æ”¯æŒ `host.docker.internal` è®¿é—®å®¿ä¸»æœºæœåŠ¡
- ç²¾ç®€æ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—

### v1.0.2 (2026-01-14)

#### ğŸ› Bug Fixes / ğŸ”§ Improvements

- ä¿®å¤è§†é¢‘ç”Ÿæˆ API å“åº”è§£æé—®é¢˜
- æ·»åŠ  OpenAI Sora è§†é¢‘ç«¯ç‚¹é…ç½®
- ä¼˜åŒ–é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ”¹åŠ¨ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## API é…ç½®ç«™ç‚¹

2 åˆ†é’Ÿå®Œæˆé…ç½®ï¼š[API èšåˆç«™ç‚¹](https://api.chatfire.site/models)

---

## ğŸ‘¨â€ğŸ’» å…³äºæˆ‘ä»¬

**AI ç«å® - AI å·¥ä½œå®¤åˆ›ä¸šä¸­**

- ğŸ  **ä½ç½®**: ä¸­å›½å—äº¬
- ğŸš€ **çŠ¶æ€**: åˆ›ä¸šä¸­
- ğŸ“§ **Email**: [18550175439@163.com](mailto:18550175439@163.com)
- ğŸ™ **GitHub**: [https://github.com/chatfire-AI/huobao-drama](https://github.com/chatfire-AI/huobao-drama)

> _"è®© AI å¸®æˆ‘ä»¬åšæ›´æœ‰åˆ›é€ åŠ›çš„äº‹"_

## é¡¹ç›®äº¤æµç¾¤

![é¡¹ç›®äº¤æµç¾¤](drama.png)

- æäº¤ [Issue](../../issues)
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼**

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=chatfire-AI/huobao-drama&type=date&legend=top-left)](https://www.star-history.com/#chatfire-AI/huobao-drama&type=date&legend=top-left)
Made with â¤ï¸ by Huobao Team

</div>
